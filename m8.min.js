!function(a){function w(a,b,c){c=c===!0,b||(b=a,a=H());for(var d in b)!D(b,d)||c&&D(a,d)||(a[d]=b[d]);return a}function x(a,b,c,d,e){var f=C(a,b);return!c.get&&!c.set||delete c.writable,d===!0||!f?Object.defineProperty(a,b,c):e===!0&&f&&new Error("m8.def cannot overwrite existing property: "+b+", in item type: "+M(a)+"."),G}function y(a,b,c,d,e){c||(c="cw");for(var f in b)!D(b,f)||x(a,f,z(b[f],c),d,e);return G}function z(a,b){return w(L(a)=="object"?a:{value:a},L(b)=="object"?b:k[b.toLowerCase()]||k.cew)}function A(a){return!B(a)||!F(a)&&E(a)||!1}function B(a){return!(a===null||a===e||typeof a=="number"&&isNaN(a))}function C(a,b){return b in Object(a)}function D(a,b){return c.hasOwnProperty.call(a,b)}function E(a){return C(a,"length")||L(a)=="object"}function F(a){return("length"in(a=Object(a))?a:Object.keys(a)).length}function G(a){return a}function H(a,b){return(b=Object.create(null))&&arguments.length>=1?w(b,a):b}function I(a){return c.toString.call(a)}function J(a){return c.valueOf.call(a)}function K(a){return a==h?h:a==g||a=="nodelist"?g:!a.indexOf("htm")&&a.lastIndexOf("element")+7===a.length?"htmlelement":!1}function L(a,b){return(b=I(a))in t?t[b]:t[b]=b.split(" ")[1].split("]")[0].toLowerCase().replace(r,"$1")}function M(a){return a===null||a===e?!1:C(a,"__type__")?a.__type__:Object.getPrototypeOf(a)===null?"nullobject":e}function N(a){return(a||j)+ ++i}function O(c){return b=="commonjs"?c?c instanceof d?c.exports:c:module.exports:c||a}function P(){return s.call(arguments).forEach(Q),G}function Q(a){C(a,v)||x(a,v,z(0,"w"));var b=u[a.__name__||a.name];if(!b)return;b.slice(a[v]).forEach(R,a),a[v]=b.length}function R(a){a(this,G)}"use strict";var b=typeof module!="undefined"&&"exports"in module&&typeof require=="function"?"commonjs":typeof navigator!="undefined"?"browser":"other",c=Object.prototype,d=b!="commonjs"?null:require("module"),e,f=[!1,NaN,null,!0,e].reduce(function(a,b){return a[String(b)]=b,a},H()),g="htmlcollection",h="htmldocument",i=999,j="anon__",k=function(){var a="configurable enumerable writable".split(" "),b={ce:"ec",cw:"wc",ew:"we",cew:"cwe ecw ewc wce wec".split(" ")},c={c:[!0,!1,!1],ce:[!0,!0,!1],cew:[!0,!0,!0],cw:[!0,!1,!0],e:[!1,!0,!1],ew:[!1,!0,!0],r:[!1,!1,!1],w:[!1,!1,!0]},d=Object.keys(c).reduce(function(d,e){return d[e]=a.reduce(function(a,b,d){return a[b]=c[e][d],a},H()),e in b&&typeof b[e]!="string"?b[e].forEach(function(a){d[a]=d[e]}):d[b[e]]=d[e],d},H());return delete d.undefined,d}(),l=/htmlcollection|nodelist/,m=/^html\w+?element$/,n=/global|window/i,o=/^\u005E?m8/,p=/[\s\(]*function([^\(]+).*/,q=/\[[^\s]+\s([^\]]+)\]/,r=/^[Ww]ebkit|[Mm]oz|O|[Mm]s|[Kk]html(.*)$/,s=Array.prototype.slice,t={"[object Object]":"object"},u={Array:[],Boolean:[],Date:[],Function:[],Number:[],Object:[],RegExp:[],String:[]},v="__xid__";typeof global=="undefined"||(a=global),y(G,{ENV:b,global:{value:a},modes:{value:k},__type__:"m8",bless:function(a,b){switch(L(a)){case"array":break;case"string":a=a.split(".");break;default:return O(b)}o.test(a[0])&&(b=G,a.shift());if(!a.length)return O(b);a[0].indexOf("^")||(b||a[0]=="^"?a.shift():a[0]=a[0].substring(1)),b=O(b);var c;while(c=a.shift())b=b[c]||(b[c]=H());return b},coerce:function(a,b,c){return isNaN(b=Number(a))?(c=String(a))in f?f[c]:a:b},copy:w,def:x,defs:y,describe:z,empty:A,exists:B,got:C,has:D,id:function(a,b){return a?C(a,"id")?a.id:a.id=N(b):N(b)},iter:E,len:F,nativeType:L,noop:function(){},obj:H,range:function(a,b){var c=[a];while(++a<=b)c.push(a);return c},tostr:I,type:M,valof:J,x:P},"w"),x(P,"cache",z(function(a,b){return u[a]||(u[a]=[]),u[a].push(b),G},"w")),P.cache("Array",function(a){x(a,"coerce",z(function(a,b,c){if(!C(a,"length"))return s.call(arguments);b=parseInt(b,10);switch(arguments.length){case 2:isNaN(b)||b>=0?c=a.length:(c=a.length+b,b=0);break;case 3:c=isNaN(c=parseInt(c,10))?a.length:c>b?c:c<=0?a.length+c:b+c}return s.call(a,b,c)},"w")),x(a.prototype,"find",z(function(a,b){var c=-1,d=this.length>>>0;b||(b=this);while(++c<d)if(!!a.call(b,this[c],c,this))return this[c];return null},"w"))}),P.cache("Boolean",function(a){x(a,"coerce",z(function(a){switch(M(a)){case"boolean":return a;case"nan":case!1:return!1;case"number":case"string":return a in f?!!f[a]:Number(a)!==0}return!0},"w"))}),P.cache("Function",function(a){y(a.prototype,{__name__:{get:function(){if(!this.__m8name__){var a=J(this),b=a!==this?a.__name__!=="anonymous"?a.__name__:null:null,c=b||this.name||this.displayName||(String(this).match(p)||["",""])[1].trim();x(this,"__m8name__",z(b||c||"anonymous","w"))}return this.__m8name__}},mimic:function(a,b){var c=J(a);return y(this,{displayName:b||a.__name__,toString:function(){return c.toString()},valueOf:function(){return c}},"c",!0),this}},"w")}),P.cache("Object",function(a){x(a.prototype,"__type__",w({get:function(){var a=this,b=a.constructor,c=L(a),d=K(c)||(n.test(c)?"global":!1);return d||(c=="object"&&b.__type__!="function"?b.__name__.toLowerCase()||b.__type__||c:c=="number"&&isNaN(a)?"nan":c)}},k.r)),y(a,{reduce:function(b,c,d){return a.keys(b).reduce(function(a,d,e){return a=c.call(b,a,b[d],d,b,e),a},d)},value:function(b,c){if(isNaN(c)){if(C(b,c))return b[c];if(!!~c.indexOf(".")){var d;c=c.split(".");while(d=c.shift())if((b=a.value(b,d))===e)return b;return b}}return A(b)?e:A(b[c])?typeof b.get=="function"?b.get(c):typeof b.getAttribute=="function"?b.getAttribute(c):e:b[c]},values:function(b){return a.keys(Object(b)).map(function(a){return b[a]})}},"w")}),P(Object,Array,Boolean,Function),b!="commonjs"?x(a,"m8",z({value:G},"r")):module.exports=G}(this)