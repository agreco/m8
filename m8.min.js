!function(a){function u(a,b,c){c=c===!0,b||(b=a,a=E());for(var d in b)!B(b,d)||c&&B(a,d)||(a[d]=b[d]);return a}function v(a,b,c,d,e){var f=A(a,b);return!c.get&&!c.set||delete c.writable,d===!0||!f?Object.defineProperty(a,b,c):e===!0&&f&&new Error("m8.def cannot overwrite existing property: "+b+", in item type: "+J(a)+"."),D}function w(a,b,c,d,e){c||(c="cw");for(var f in b)!B(b,f)||v(a,f,x(b[f],c),d,e);return D}function x(a,b){return u(I(a)=="object"?a:{value:a},I(b)=="object"?b:i[b.toLowerCase()]||i.cew)}function y(a){return!z(a)||(M(a)?!C(a):!1)}function z(a){return(a=J(a))!==!1&&a!="nan"}function A(a,b){return b in Object(a)}function B(a,b){return c.hasOwnProperty.call(a,b)}function C(a){return Object.keys(Object(a)).length}function D(a){return a}function E(a,b){return(b=Object.create(null))&&arguments.length>=1?u(b,a):b}function F(a){return c.toString.call(a)}function G(a){return c.valueOf.call(a)}function H(a){return j.test(a)?"htmlcollection":k.test(a)?"htmlelement":!1}function I(a,b){return(b=F(a))in r?r[b]:r[b]=b.toLowerCase().match(o)[1].replace(p,"$1")}function J(a){return a===null||a===e?!1:A(a,"__type__")?a.__type__:Object.getPrototypeOf(a)===null?"nullobject":e}function K(a){return(a||h)+ ++g}function L(c){return b=="commonjs"?c?c instanceof d?c.exports:c:module.exports:c||a}function M(a){return"length"in Object(a)||I(a)=="object"}function N(){return q.call(arguments).forEach(O),D}function O(a){A(a,t)||v(a,t,x(0,"w"));var b=s[a.__name__||a.name];if(!b)return;b.slice(a[t]).forEach(P,a),a[t]=b.length}function P(a){a(this,D)}"use strict";var b=typeof module!="undefined"&&"exports"in module&&typeof require=="function"?"commonjs":typeof navigator!="undefined"?"browser":"other",c=Object.prototype,d=b!="commonjs"?null:require("module"),e,f=[!1,NaN,null,!0,e].reduce(function(a,b){return a[String(b)]=b,a},E()),g=999,h="anon__",i=function(){var a="configurable enumerable writable".split(" "),b={ce:"ec",cw:"wc",ew:"we",cew:"cwe ecw ewc wce wec".split(" ")},c={c:[!0,!1,!1],ce:[!0,!0,!1],cew:[!0,!0,!0],cw:[!0,!1,!0],e:[!1,!0,!1],ew:[!1,!0,!0],r:[!1,!1,!1],w:[!1,!1,!0]},d=Object.keys(c).reduce(function(d,e){return d[e]=a.reduce(function(a,b,d){return a[b]=c[e][d],a},E()),e in b&&typeof b[e]!="string"?b[e].forEach(function(a){d[a]=d[e]}):d[b[e]]=d[e],d},E());return delete d.undefined,d}(),j=/htmlcollection|nodelist/,k=/^html\w+?element$/,l=/global|window/i,m=/^\u005E?m8/,n=/[\s\(]*function([^\(]+).*/,o=/\[[^\s]+\s([^\]]+)\]/,p=/^[Ww]ebkit|[Mm]oz|O|[Mm]s|[Kk]html(.*)$/,q=Array.prototype.slice,r={"[object Object]":"object"},s={Array:[],Boolean:[],Date:[],Function:[],Number:[],Object:[],RegExp:[],String:[]},t="__xid__";typeof global=="undefined"||(a=global),w(D,{ENV:b,global:{value:a},modes:{value:i},__type__:"m8",bless:function(a,b){switch(I(a)){case"array":break;case"string":a=a.split(".");break;default:return L(b)}m.test(a[0])&&(b=D,a.shift());if(!a.length)return L(b);a[0].indexOf("^")||(b||a[0]=="^"?a.shift():a[0]=a[0].substring(1)),b=L(b);var c;while(c=a.shift())b=b[c]||(b[c]=E());return b},coerce:function(a,b,c){return isNaN(b=Number(a))?(c=String(a))in f?f[c]:a:b},copy:u,def:v,defs:w,describe:x,empty:y,exists:z,got:A,has:B,id:function(a,b){return a?A(a,"id")?a.id:a.id=K(b):K(b)},len:C,nativeType:I,noop:function(){},obj:E,range:function(a,b){var c=[a];while(++a<=b)c.push(a);return c},tostr:F,type:J,valof:G,x:N},"w"),v(N,"cache",x(function(a,b){return s[a]||(s[a]=[]),s[a].push(b),D},"w")),N.cache("Array",function(a){v(a,"coerce",x(function(a,b,c){return b=J(b)=="number"?b>0?b:0:0,c=J(c)=="number"?c>b?c:c<=0?a.length+c:b+c:a.length,A(a,"length")?q.call(a,b,c):[a]},"w")),v(a.prototype,"find",x(function(a,b){var c=-1,d=this.length>>>0;b||(b=this);while(++c<d)if(!!a.call(b,this[c],c,this))return this[c];return null},"w"))}),N.cache("Boolean",function(a){v(a,"coerce",x(function(a){switch(J(a)){case"boolean":return a;case"nan":case!1:return!1;case"number":case"string":return a in f?!!f[a]:Number(a)!==0}return!0},"w"))}),N.cache("Function",function(a){w(a.prototype,{__name__:{get:function(){if(!this.__m8name__){var a=G(this),b=a!==this?a.__name__!=="anonymous"?a.__name__:null:null,c=b||this.name||this.displayName||(String(this).match(n)||["",""])[1].trim();v(this,"__m8name__",x(b||c||"anonymous","w"))}return this.__m8name__}},mimic:function(a,b){var c=G(a);return w(this,{displayName:b||a.__name__,toString:function(){return c.toString()},valueOf:function(){return c}},"c",!0),this}},"w")}),N.cache("Object",function(a){v(a.prototype,"__type__",u({get:function(){var a=this,b=a.constructor,c=I(a),d=H(c)||(l.test(c)?"global":!1);return d||(c=="object"&&b.__type__!="function"?b.__name__.toLowerCase()||b.__type__||c:c=="number"&&isNaN(a)?"nan":c)}},i.r)),w(a,{reduce:function(b,c,d){return a.keys(b).reduce(function(a,d,e){return a=c.call(b,a,b[d],d,b,e),a},d)},value:function(b,c){if(isNaN(c)&&!!~c.indexOf(".")){var d;c=c.split(".");while(d=c.shift())if((b=a.value(b,d))===e)return b;return b}return y(b)?e:y(b[c])?I(b.get)=="function"?b.get(c):I(b.getAttribute)=="function"?b.getAttribute(c):e:b[c]},values:function(b){return a.keys(b).map(function(a){return b[a]})}},"w")}),N(Object,Array,Boolean,Function),b!="commonjs"?v(a,"m8",x({value:D},"r")):module.exports=D}(this)